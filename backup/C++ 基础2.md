<h1 class="atx" id="c基础-2">C++基础 #2</h1>
<p>一、表达式</p>
<p>·cout.setf(ios_base::boolalpha);用于设置cout在显示bool值时使用true或false,而不是0或1.
·为判定表达式x=100的值，C++进行了赋值操作。当判定表达式的值的操作改变了内存中数据的值时，则该表达式有副作用(side effcet)
·任何表达式加上分号成为语句，反过来就不对了。表达式加上分号成为表达式语句
·返回语句、声明语句和for、while、do-while等语句都不是表达式语句，其没有值。
如int total其不是表达式，没有值。判断语句是否为表达式看是否有值
·可以在for循环的初始化部分声明变量。该变量会在离开for后消失。for循环的第一个语句可以是表达式语句，也可以是声明语句。</p>
<p>▲▲·递增(++)和递减(--)运算符：每次增减1
用法：前缀 ++变量 --变量 先修改再使用变量的值（此时已修改）
后缀 变量-- 变量++ 先使用变量的值再修改变量</p>
<p>警告：在编写程序时，请严格遵守标准，否则程序会出现难以预知的错误。不能在同一条语句上运用多次递增递减运算符，如x=(++n)+(n++)会在不同的系统上生成不同的结果。</p>
<p>·副作用和顺序点
副作用：计算表达式时对某一些东西进行了修改
顺序点：程序执行过程的一个点，任何完整表达式后都有一个顺序点，在进入下一步前将确保对所有副作用都进行了评估。即在执行下一条语句前，赋值、递增、递减运算符执行的所有修改都必须完成。</p>
<p>完整表达式：不是另一个更大的表达式的子表达式
y=(4+x++)+(6+x++);
以上语句中4+x++不是完整表达式，其后没有顺序点，所以其所有的修改无法进行保证
则x不一定加1，所以该表达式会产生未定义行为。</p>
<p>Note:在部分计算机教育中，有一个经典问题：i=1,则表达式n=(i++)+(++i)值为多少，这是与上面的问题相似，在上面已经明确指明此会导致不同编译器输出不同的结果。所以无论如何都不能写这样的程序。且在C++和C标准中已经明确指出此为未定义行为！！</p>
<p>*对于用户定义的类型，若定义了递增递减运算符，则前缀格式的效率更高</p>
<p>·递增递减与指针
前缀格式与解除引用的优先级相同，从右向左结合；后缀格式比前缀格式优先级高，从左向右结合。<em>++pt表示先将++应用于pt后再应用</em>，++*pt意味着先取得pt指向的值，然后递增，<em>pt++先应用++再应用</em>。</p>
<p>复合语句（代码块）由一对花括号和它包含的语句组成，被视作一条语句。
在代码块中定义的变量只在其中有效。若外部定义了同名变量，则先隐藏，在代码块执行完毕后代码块中的变量消失，外部的变量重新出现。</p>
<p>▲·逗号运算符：表达式的值为右侧（第二部分）的值。</p>
<p>·bool值提升为int:只有0(false)和1(true)两种情况</p>
<p>二、C风格字符串的比较</p>
<p>注意：用引号引起的字符串常量也是其地址，word==”mate”比较的是它们地址是否一致</p>
<p>▲▲▲▲▲cstring文件中的strcmp()函数：接受两个char*
如果两个字符串相同，则返回0
以下为对其的解释的2个版本：
①如果第一个字符串按字母排序排在第二个字符串后面，strcmp()返回正数值。（也说按系统排列顺序）在ASCII码中，大写编码都比小写小，大写字母排在前面。
②strcmp()函数是根据ACSII码的值来依次比较 str1 和 str2 的每一个字符直到出现不到的字符，或者到达字符串末尾；strcmp()函数首先将s1字符串的第一个字符值减去s2第一个字符，若差值为零则继续比较下去；若差值不为零，则返回差值。
如：”Zoo”比”aviary”排在前面，”Physics”与”physics”不一样</p>
<p>检测相等或排列顺序:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;以下表达式为true的条件：
①str1与str2相等 strcmp(str1,str2)==0
②str1与str2不相等 strcmp(str1,str2)!=0
strcmp(str1,str2)
③str1在str2的前面（此时str1&lt;str2） strcmp(str1,str2)&lt;0<br>//str1中的字符比str2的字符数值小
④str1在str2的后面（此时str1&gt;str2） strcmp(str1,str2)&gt;0<br>//str1中的字符比str2的字符数值小</p>
<p>三、计时器(头文件ctime或time.h)</p>
<p>clock()函数返回程序开始执行后所用的系统时间,返回clock_t类型(是一个类型别名)
CLOCKS_PER_SEC常量是每秒钟包含的系统时间单位数，将系统时间除以该值得到秒数。
即 系统时间/每秒钟系统时间单位数(CLOCKS_PER_SEC)=秒数
所以 秒数*CLOCKS_PER_SEC=系统时间，为以上的实现</p>
<p>类型别名：关键字typedef:格式: typedef 类型名 类型的别名;
此时可以用声明的别名来替代原来的类型名使用。如 typedef char* B_pointer;</p>
<p>一个计时器案列(来自C++ Primer Plus)</p>
<pre><code class="fenced-code-block language-cpp">#include &lt;iostream&gt;
#include &lt;ctime&gt; // describes clock() function, clock_t type
int main()
{
    using namespace std;
    cout &lt;&lt; "Enter the delay time, in seconds: ";
    float secs;
    cin &gt;&gt; secs;
    clock_t delay = secs * CLOCKS_PER_SEC;  // convert to clock ticks
    cout &lt;&lt; "starting\a\n";
    clock_t start = clock();
    while (clock() - start &lt; delay )        // wait until time elapses
        ;                                   // note the semicolon
    cout &lt;&lt; "done \a\n";
    // cin.get();
    // cin.get();
    return 0; 
}</code></pre>
<p>四、基于范围的for循环(C++11)
示例：
double prices[5] = {4.99, 10.99, 6.87, 7.99, 8.49}; 
for (double x : prices) 
cout &lt;&lt; x &lt;&lt; std::endl;
该循环显示数组中的每一个值（从prices[0]到prices[4]）
能够结合使用初始化列表
for (int x : {3, 5, 2, 8, 6}) 
cout &lt;&lt; x &lt;&lt; " ";
cout &lt;&lt; ‘\n’;</p>
<p>五、循环进行字符输入</p>
<p>1.使用原始的cin
(1)传统停止输入方法：使用哨兵字符，将其作为停止标记.
(2)cin在读取char值时忽略空格和换行符。输入的空格不能回显
(3)cin的输入被缓冲，按下回车键后才会发送内容。</p>
<pre><code class="fenced-code-block language-cpp">#include&lt;iostream&gt;
using namespace std;
int main()
{
    char ch=0;
    int total=0;
    while(ch!='$')
    {
        cin&gt;&gt;ch;
        total++;
        cout&lt;&lt;ch;
    }
    return 0;
}</code></pre>
<p><code>&lt;stdin&gt;</code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;What can I do for you?$</p>
<p><code>&lt;stdout&gt;</code> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WhatcanIdoforyou?$</p>
<p>2.补救
（1）cin.get(ch);读取输入中的下一个字符，包括空格、制表符、换行符。其返回istream&amp;类型的cin(是cin对象的引用，可以继续调用cin的方法)。
注：cin所属的istream类包含了成员get(ch)，其子类都有这个方法。
（2）C++中可以有多个同名函数，是函数重载
（3）文件尾条件
①制造文件尾：Ctrl+Z (^Z)
②C++在检测到EOF(END OF FILE,即文件尾)，cin将两位(eofbit和failbit)设为1.
cin.eof() 检测到eofbit被设为1，cin.eof()返回true,否则返回false.
cin.fail() 如果eofbit或failbit设为1，则fail()成员返回true
两个函数报告最近读取的结果
cin.clear() 重置输入
③istream对象在需要bool值的地方可以转为bool值（调用转换函数）。若最后一次读取成功，返回true,失败返回false。其比两个成员函数更通用。
④不接受任何参数的cin.get()成员函数返回输入中的下一个字符。该函数到达EOF时返回符号常量EOF，其值被定义为-1.
⑤cout.put(ch)显示一个字符</p>
<p>六、字符函数库 cctype</p>
<p><img alt="" src="file://C:%5CUsers%5Cheyixian%5CAppData%5CRoaming%5Cmarktext%5Cimages%5C2025-08-21-22-57-00-image.png?msec=1755788220339"></p>
<p><img alt="" src="file:///C:/Users/heyixian/AppData/Roaming/marktext/images/2025-08-21-22-57-20-image.png?msec=1755788243907"></p>
